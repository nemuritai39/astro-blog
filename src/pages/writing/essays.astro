---
import { getCollection } from 'astro:content';
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

// 【关键修改点】根据页面不同，把 'essays' 改成 'poems'、'thinking' 或 'goals'
const collectionName = 'essays'; 
const posts = await getCollection(collectionName, ({ data }) => !data.draft);
const sortedPosts = posts.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());

const title = "nemu · " + collectionName;
---

<html lang="en">
  <head><BaseHead title={title} description="Archive" /></head>
  <body>
    <Header />
    <main class="wrap" style="max-width: 800px; margin: 80px auto; padding: 20px;">
      <h1 style="font-family: var(--font-display); text-transform: capitalize;">{collectionName}</h1>
      <ul style="list-style: none; padding: 0;">
        {sortedPosts.map(post => (
          <li style="margin-bottom: 2rem; border-bottom: 1px dashed rgba(255,255,255,0.1); padding-bottom: 1rem;">
            <a href={`/${collectionName}/${post.id}/`} style="text-decoration: none; color: inherit;">
              <h2 style="font-family: var(--font-display); color: #d6b25e;">{post.data.title}</h2>
              <p style="opacity: 0.7;">{post.data.description}</p>
              <span style="font-family: var(--font-mono); font-size: 0.8rem; opacity: 0.5;">
                {post.data.pubDate.toLocaleDateString()}
              </span>
            </a>
          </li>
        ))}
      </ul>
    </main>
    <Footer />
  </body>
</html>
