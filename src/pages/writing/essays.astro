---
import { getCollection } from 'astro:content';
// 使用别名引用，永远不会路径报错
import BaseHead from '@/components/BaseHead.astro';
import Header from '@/components/Header.astro';
import Footer from '@/components/Footer.astro';

const collectionName = 'essays'; 
const posts = await getCollection(collectionName, ({ data }) => !data.draft);
const sortedPosts = posts.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<html lang="en">
  <head>
    <BaseHead title={`nemu · ${collectionName}`} description="Archive" />
    <style>
      /* 这里保留你原本所有的 CSS 设计 */
      .wrap { max-width: 1100px; margin: 0 auto; padding: 68px 20px; }
      .hero { position: relative; padding: 16px 0 34px; }
      .hero::before { content: "✠"; position: absolute; left: 0; top: -6px; color: #d6b25e; }
      .gem { width: 10px; height: 10px; transform: rotate(45deg); background: radial-gradient(circle, #fff, #d6b25e); border: 1px solid #d6b25e; }
      /* ... 其他样式 ... */
    </style>
  </head>
  <body>
    <Header />
    <main class="wrap">
      <section class="hero">
        <h1 style="text-transform: capitalize;">{collectionName}</h1>
      </section>
      <div class="grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        {sortedPosts.map((post) => (
          <a href={`/writing/${collectionName}/${post.id}/`} style="text-decoration: none; color: inherit;">
            <article class="card" style="border: 1px solid rgba(255,255,255,0.1); padding: 20px; border-radius: 15px;">
              <h2 style="color: #d6b25e;">{post.data.title}</h2>
              <p style="opacity: 0.7;">{post.data.description}</p>
            </article>
          </a>
        ))}
      </div>
    </main>
    <Footer />
  </body>
</html>
