---
import { getCollection, render } from 'astro:content';
// 这里是终极关键！详情页更深，必须退回三层
import BaseHead from "../../../components/BaseHead.astro";
import Header from "../../../components/Header.astro";
import Footer from "../../../components/Footer.astro";

export async function getStaticPaths() {
  const entries = await getCollection('essays');
  return entries.map(entry => ({
    params: { slug: entry.id },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await render(entry);
---

<html lang="en">
  <head>
    <BaseHead title={entry.data.title} description={entry.data.description} />
  </head>
  <body>
    <Header />
    <main style="max-width: 800px; margin: 80px auto; padding: 20px;">
      <article>
        <h1 style="font-family: var(--font-display); color: #d6b25e; font-size: 3rem;">{entry.data.title}</h1>
        <div class="prose" style="line-height: 1.8; margin-top: 30px;">
          <Content />
        </div>
      </article>
    </main>
    <Footer />
  </body>
</html>
